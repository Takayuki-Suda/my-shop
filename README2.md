1. アプリの目的
   このアプリは、ユーザーが商品を購入するためのショッピングカートと決済機能を提供するものです。ユーザーは商品をカートに追加し、最終的に Stripe で決済を行います。支払い後、ユーザーの所持金が更新される仕組みです。

2. 主要な機能
3. 商品購入ページ
   ユーザーが商品をカートに追加し、購入を進めるための「商品購入ページ」を提供しています。
   ユーザーが購入時に所持金額（データベースで管理されている）を確認できるようにし、決済前にその金額が足りるかをチェックします。
   小計、消費税、送料、合計金額が表示されます。
4. Stripe 決済システム
   ユーザーはカード情報を入力し、Stripe を通じて決済を行います。
   支払いが成功した場合、決済が完了し、ユーザーの所持金額が減額されます。
   決済後には所持金額が更新され、最新の所持金額が画面に反映されます。
5. 所持金額の更新
   決済が成功すると、サーバー側でユーザーの所持金額を更新する API が呼び出されます。
   PATCH リクエストを使用して、所持金額を減額します。
   サーバーから更新された情報を受け取り、クライアント側で表示を更新します。
6. 技術スタック
   Next.js: フレームワークとして、React と SSR（サーバーサイドレンダリング）を活用しています。
   Prisma: データベースとやり取りするための ORM（Object Relational Mapping）ツールを使い、MySQL データベースと接続しています。
   Stripe: 決済処理に Stripe を使用しており、クレジットカードの情報を安全に処理します。
   React: ユーザーインターフェースは React で構築され、状態管理に useState と useEffect を使用しています。
7. システムの流れ
   ユーザーが商品をカートに追加します。
   商品購入ページでカートの合計金額、所持金額、税額、送料が表示されます。
   ユーザーはカード情報を入力し、支払いを確認します。
   支払いが完了すると、決済結果が返され、所持金額が減額されます。
   ユーザーの最新の所持金額が画面に反映されます。
8. データベースと API
   ユーザー管理: ユーザーの情報（名前、メール、所持金額）を MySQL で管理しています。
   所持金額の更新: ユーザーが支払いを行った後、所持金額を減額する API が PATCH /updateBalance で提供されています。データベースの所持金額は減額処理が行われ、更新されたデータが返されます。
9. エラーハンドリング
   所持金額が足りない場合や、決済時にエラーが発生した場合、適切なエラーメッセージを表示します。
   サーバー側でもデータの整合性が保たれるよう、エラーチェックや例外処理を行っています。
